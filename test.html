<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>Python on the ev3dev framework  &middot; Cole Wilson</title>
	<link href="/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="navsmall"></div>
<script>var layout="post";</script>
<header>
	<center>
		<div class="navlinks n1">
		<a style="color:grey;margin-left:30px;margin-right:30px;" href="/contact">contact</a>
		<a style="color:grey;margin-left:30px;margin-right:30px;" href="/about">about</a>
		</div>

		<span style="color:var(--color);margin-left:30px;margin-right:30px;" id="top"><a style="color:var(--color);" href="/">cole wilson</a><span id="toptitle"></span></span>

		<div class="navlinks n2">
		<a style="color:grey;margin-left:30px;margin-right:30px;" href="/posts">posts</a>
		<a style="color:grey;margin-left:30px;margin-right:30px;" href="/projects">projects</a>
		</div>
	</center>
	<div class="progress-container">
		<div class="progress-bar" id="myBar"></div>
	</div>
</header>
<div id="hspace"></div>
<section id="hero" style="background-image: url(https://i.ytimg.com/vi/JGcjqvwfL3s/maxresdefault.jpg);">
	<span class="herotitle">Python on the ev3dev framework</span>
		</section>
		<section id="body">
		<aside>
		<div id="about">
<a href="a" class="project-card">
	<img src="https://img.icons8.com/windows/90/000000/github.png">
	<span>GitHub</span>
</a>
<a href="a" class="project-card">
	<img src="https://img.icons8.com/windows/90/000000/globe.png">
	<span>Visit Site</span>
</a>
<a href="a" class="project-card">
	<img src="https://img.icons8.com/windows/90/000000/download.png">
	<span>Download</span>
</a>

		</div>
		</aside>
		<article>
			<h2 id="introduction">Introduction:</h2>
<p>Recently, I have been working on a project to use Python on the ev3dev platform. This is useful, because you can write complex programs for your robots. For example, you could <a href="https://by-the-w3i.github.io/2018/01/03/EV3-PS4-controller/">connect the ev3 to a PS4 controller.</a> For me, I was working on a SumoBot, a robot that battles with another, and tries to push it out of a ring. However, this approach will work with an sort of robot.</p>

<h2 id="overview">Overview:</h2>
<p>In this tuorial, I will show you how to:</p>
<ul>
  <li>Download the ev3dev operating system for your brick.</li>
  <li>Connect your brick to your Windows or Mac computer.</li>
  <li>Setup PyCharm on your computer.</li>
  <li>Connect to a GitHub repo.</li>
  <li>Sync the code to your brick.</li>
</ul>

<h2 id="materials">Materials:</h2>
<p>You will need the following:</p>
<ul>
  <li>A Windows or Mac with a working Internet and Bluetooth connection.</li>
  <li>An ev3 brick with various sensor and motors.</li>
  <li>A 2-16gb SD card.</li>
  <li>A way to put the SD card into your computer.</li>
</ul>

<h2 id="1-getting-started">1: Getting started:</h2>
<ol>
  <li>First, you will have to download the ev3dev boot image for the ev3 brick. This enables it to work with the Python programming language. You can find the image here.</li>
  <li>Unzip the file, and move the contents to somewhere where you can easily access them.</li>
  <li>Next, flash the image onto your SD card.
    <blockquote>
      <p><strong>Note:</strong> to do this, use a program like Etcher, or Rufus, or use the command line. Make sure that you select the correct disk image.</p>
    </blockquote>
  </li>
  <li>Insert the SD card into the slot in the brick. Make sure that your brick is off.</li>
  <li>Next, turn on your brick. It will flash wierdly and show lots of text. If it doesn’t show a menu screen in 15 minutes, repeat steps 4-5.</li>
  <li>Next, we need to connect the brick to your computer.</li>
  <li><a href="https://www.ev3dev.org/docs/tutorials/connecting-to-the-internet-via-bluetooth/">View this website for instructions on how to connect your brick to the computer.</a></li>
  <li>Connect to your computer with ssh:
    <ul>
      <li>If you have a Windows computer download PuTTy, and launch it. Next type in <code class="language-plaintext highlighter-rouge">ev3dev.local</code><br /><img src="/static/assets/img/putty.png" alt="PuTTy" /></li>
      <li>Then, type <code class="language-plaintext highlighter-rouge">robot</code> as the username.</li>
      <li>If you have a Mac, then open Terminal, then type <code class="language-plaintext highlighter-rouge">ssh robot@ev3dev.local</code></li>
      <li>Next type in <code class="language-plaintext highlighter-rouge">maker</code> as the password.
        <blockquote>
          <p>Having an error message? Make sure your robot is on, and that you have connected the brick. Also, make sure you have the correct username and password.</p>
        </blockquote>
      </li>
      <li>You have access to your brick’s inner workings! Try typing <code class="language-plaintext highlighter-rouge">fortune</code> to get a witty response from the computer.<br /><img src="https://www.ev3dev.org/images/windows/10/putty-robot-at-ev3dev.png" alt="ev3dev shell" /></li>
      <li>Your home folder is <code class="language-plaintext highlighter-rouge">/home/robot</code> this is where you are put when you connect to the brick.
        <blockquote>
          <p><strong>Some basic commands:</strong></p>
          <ul>
            <li><strong>cd {path}</strong>: changes the current working directory to</li>
            <li><strong>ls</strong>: This shows all the files and folders in the current working directory.</li>
            <li><strong>cat {file}</strong>: This returns the contents of the specified file.</li>
            <li><strong>nano {file}</strong>: This opens an editor for the specified file. Press <code class="language-plaintext highlighter-rouge">ctrl+x</code> (<code class="language-plaintext highlighter-rouge">^x</code>)to save and exit.</li>
            <li><strong>clear</strong>: Clears the terminal.</li>
            <li><strong>logout</strong>: Logs out of remote connection.</li>
            <li><strong>rm -rf {path}</strong>: Deletes file or folder.
-<strong>python3 {file}</strong>: Runs the specified python program.</li>
          </ul>
        </blockquote>
      </li>
      <li>Right now, you can <code class="language-plaintext highlighter-rouge">nano</code> files into existence and run them from the terminal, but this is less than ideal, in the next section, you will set up PyCharm and Git.</li>
    </ul>
  </li>
</ol>

<h2 id="2-setting-up-a-development-environment">2: Setting up a Development Environment:</h2>
<ol>
  <li><a href="https://www.jetbrains.com/pycharm/download/">Download PyCharm community edition</a> (or the Pro version if you have it, it’s not needed.)</li>
  <li>Open the file and install it to your computer.</li>
  <li>If you have Windows, you have to configure Git, if you have Mac, you already have it installed, so skip to step 4.
    <ul>
      <li>Download <a href="https://git-scm.com/download/win">git-scm for Windows</a>.</li>
      <li>Open and follow the install instructions with default options.</li>
      <li>Open PyCharm, and push <code class="language-plaintext highlighter-rouge">ctrl + alt + s</code> to open preferences.</li>
      <li>Goto <code class="language-plaintext highlighter-rouge">Version Control &gt; git</code> and in the top file path put <code class="language-plaintext highlighter-rouge">C:\Users\&lt;your username&gt;\AppData\Local\Programs\Git\git.exe</code></li>
    </ul>
  </li>
  <li>Now, <a href="https://github.com/signup">get a GitHub account</a> if you don’t have one yet. They are free, and tremendously useful.</li>
  <li>Goto <a href="https://github.com/new">https://github.com/new</a> and create a new repository with the name <code class="language-plaintext highlighter-rouge">ev3</code>, and select the option to include a <code class="language-plaintext highlighter-rouge">README.md</code>.<br /><img src="https://raw.githubusercontent.com/cole-wilson/cole-wilson.github.io/master/static/assets/img/ghnew.png" alt="New Repo" /></li>
  <li>Open PyCharm.</li>
  <li>Goto <code class="language-plaintext highlighter-rouge">Checkout from Version Control</code> and go to the GitHub tab. Sign in, and select your <code class="language-plaintext highlighter-rouge">ev3</code> repository. <img src="https://www2.lawrence.edu/fast/GREGGJ/CMSC210/intro/installing1.png" alt="Git" /></li>
  <li>Now, you should have your code in PyCharm. As you can see, all that you have now is a file called <code class="language-plaintext highlighter-rouge">README.md</code>.</li>
</ol>

<h2 id="3-adding-code-to-the-program">3: Adding Code to the Program.</h2>
<ol>
  <li>First, in the upper lefthand corner, it will say your project name. Right click on it, and push Create New Python file.</li>
  <li>Pycham should ask you if you wan to add the file to Git. You should do this, and select the option to automatically do this.</li>
  <li>In the new file, type:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">time</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'The program is starting...'</span><span class="p">)</span>
  <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'The program is ending.'</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>In the VCs tab in PyCharm, press commit changes.</li>
  <li>Click the blue arrow next to the COMMIT button, and push <code class="language-plaintext highlighter-rouge">Commit and Push</code>.</li>
  <li>Then push <code class="language-plaintext highlighter-rouge">Push</code>.<br /><img src="https://raw.githubusercontent.com/wiki/WheatonCS/Lexos/Developer-Guide/git-pycharm/commit-push-button.PNG" alt="commit" /></li>
  <li>Your code is now on GitHub, but how to get it on the brick?
    <blockquote>
      <p>You can view your code by going to https://github.com/{your-username}/ev3.</p>
    </blockquote>
  </li>
</ol>

<h2 id="4-adding-code-to-the-brick">4: Adding code to the brick:</h2>
<ol>
  <li>If you are on Windows, open Git-Bash from the start menu, if you have a Mac, open Terminal.</li>
  <li>Type <code class="language-plaintext highlighter-rouge">git clone https://github.com/{ github username }/ev3.git</code>. This copies your code into a local file.</li>
  <li>Next, type <code class="language-plaintext highlighter-rouge">sftp robot@ev3dev.local</code>, <em>notice it is not <code class="language-plaintext highlighter-rouge">ssh</code></em></li>
  <li>Put in your password.</li>
  <li>Now type <code class="language-plaintext highlighter-rouge">cd ~</code>, then <code class="language-plaintext highlighter-rouge">put ev3</code></li>
  <li>Now open up your SSH session. Type <code class="language-plaintext highlighter-rouge">ls</code> to view your files.</li>
  <li>You should see a blue or green folder called <code class="language-plaintext highlighter-rouge">ev3</code></li>
  <li>Go into the folder by typing <code class="language-plaintext highlighter-rouge">cd ~/ev3</code></li>
  <li>Then, type <code class="language-plaintext highlighter-rouge">python3 main.py</code></li>
  <li>Your program takes a while to load, but then it runs!</li>
</ol>

<h2 id="5-simplifying-the-process">5. Simplifying the process:</h2>
<ol>
  <li>Every time you would like to add code to your robot, you will have to remove the old code from the robot, and then do all of sections 3 and 4 again.</li>
  <li>We will simplify this process.</li>
  <li>Close your terminal. (Either Git-Bash, or Terminal)</li>
  <li>Open a new terminal.</li>
  <li>Type nano <code class="language-plaintext highlighter-rouge">e.sh</code></li>
  <li>Add this code to the file:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">echo</span> <span class="s2">"Starting..."</span>
 <span class="nb">rm</span> <span class="nt">-rf</span> ev3
 git clone htttps://github.com/&lt; username <span class="o">&gt;</span>/ev3
 sftp robot@ev3.local:~ <span class="o">&lt;&lt;&lt;</span> <span class="s1">$'put {ev3}'</span>
 <span class="nb">echo</span> <span class="s2">"Done."</span>
</code></pre></div>    </div>
  </li>
  <li>Push <code class="language-plaintext highlighter-rouge">^X</code> to save, and type <code class="language-plaintext highlighter-rouge">chmod + x e.sh</code></li>
  <li>Now, all you have to do is type <code class="language-plaintext highlighter-rouge">rm -rf ~/ev3</code> on the robot, and <code class="language-plaintext highlighter-rouge">sh e.sh</code> on the local computer to update the brick.</li>
  <li>We can go even further and make custom commands on the brick!</li>
  <li>On the brick,  type <code class="language-plaintext highlighter-rouge">sudo nano /etc/bash/bash.rc</code> and enter your password.</li>
  <li>Add this to the end of the file:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">prep</span><span class="o">=</span><span class="s1">'rm -rf ~/ev3'</span>
<span class="nb">alias </span><span class="nv">run</span><span class="o">=</span><span class="s1">'python3 ~/ev3/main.py'</span>
</code></pre></div>    </div>
  </li>
  <li>Restart the brick.</li>
</ol>

<h2 id="6-so-far">6. So far…</h2>
<p>Now, you write the program in Pycharm, and commit+push to GitHub. 
 Then, on an SSH session, you type <code class="language-plaintext highlighter-rouge">prep</code> to clear the brick.
 Then, on your local terminal, type <code class="language-plaintext highlighter-rouge">sh e.sh</code>. 
 On your SSH session, type <code class="language-plaintext highlighter-rouge">run</code>.</p>

		</article>
</section>

<!-- <section id="comments">
<div class="comment"><i><input id="name-c" placeholder="Your Name"></input></i><p><textarea id="text-c" placeholder="Your comment"></textarea></p><button id="post-c">Post</button></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
<div class="comment"><i>Cole Wilson</i><p>This is a test comment!!!!!!</p></div>
</section> -->
		<footer>
<div class="theme-switch-wrapper">
    <button id="darkmode">Toggle Dark Mode</button>
</div>
</footer>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/script.js"></script>
</body>

</html>